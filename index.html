<!DOCTYPE html>

<html lang="zh-CN">
	<head>
		<meta charset="utf-8" />
	    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
	    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
		<title>DuBois Data</title>
		<link rel="stylesheet" href="css/bootstrap.min.css" />
		<link rel="stylesheet" href="css/app.css" />
	</head>
	
	<body class="bg05">
		<header class="header">
			<h3>DuBois Data</h3>
		</header>
		
		<div class="wrapper">
			<div class="container-fluid">
				<div class="row fill-h">
					<div class="col-lg-12 fill-h">
						<div class="xpanel-wrapper xpanel-wrapper-1">
							<div class="xpanel no-bg">
								<div class="fill-h" id="bar3D"></div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		
		<script type="text/javascript" src="js/jquery-3.3.1.min.js"></script>
		<script type="text/javascript" src="js/echarts.js"></script>
		<script type="text/javascript" src="js/echarts-gl.min.js"></script>
		<script type="text/javascript">
			$(function() {
				/******************* 3D柱形图 ******************/
				//初始化echarts实例
				const bar3D = echarts.init(document.getElementById("bar3D"));
				//数据
				const hours = ['1967','1968','1969','1970','1971','1972','1973','1974','1975','1976',
								'1977','1978','1979','1980','1981','1982','1983','1984','1985','1986',
								'1987','1988','1989','1990','1991','1992','1993','1994','1995','1996',
								'1997','1998','1999','2000','2001','2002','2003','2004','2005','2006',
								'2007','2008','2009','2010','2011','2012','2013','2014','2015','2016',
								'2017','2018', '2019','2020','2021']
				const days = ['Black','Hispanic','White','Asian'];
				const data = [ //[hour, day, val]
								/*1967*/[0,0,29388],/*1968*/[0,1,31084],/*1969*/[0,2,33125],/*1970*/[0,3,33031],/*1971*/[0,4,31879],/*1972*/[0,5,32949],[1,5,42598],[2,5,57252],
            					/*1973*/[0,6,33864],[1,6,42527],[2,6,58036],/*1974*/[0,7,33059],[1,7,42279],[2,7,56064],/*1975*/[0,8,32496],[1,8,38888],[2,8,54539],
            					/*1976*/[0,9,32777],[1,9,39692],[2,9,56247],/*1977*/[0,10,32860],[1,10,41542],[2,10,56790],/*1978*/[0,11,34363],[1,11,43097],[2,11,58257],
            					/*1979*/[0,12,33794],[1,12,43496],[2,12,58371],/*1980*/[0,13,32284],[1,13,40942],[2,13,57030],/*1981*/[0,14,30992],[1,14,41929],[2,14,56026],
            					/*1982*/[0,15,30930],[1,15,39226],[2,15,55490],/*1983*/[0,16,30806],[1,16,39424],[2,16,55680],/*1984*/[0,17,32055],[1,17,40433],[2,17,57437],
            					/*1985*/[0,18,34092],[1,18,40179],[2,18,58590],/*1986*/[0,19,34095],[1,19,41493],[2,19,60526],/*1987*/[0,20,34256],[1,20,42624],[2,20,61667],[3,20,70439],
           						 /*1988*/[0,21,34612],[1,21,42949],[2,21,62389],[3,21,68070],/*1989*/[0,22,36550],[1,22,44037],[2,22,62779],[3,22,72970],/*1990*/[0,23,35974],[1,23,43013],[2,23,61533],[3,23,74063], 
            					/*1991*/[0,24,34955],[1,24,42174],[2,24,60076],[3,24,67744],/*1992*/[0,25,34012],[1,25,40980],[2,25,60372],[3,25,68553],/*1993*/[0,26,34552],[1,26,40482],[2,26,60449],[3,26,67832], 
            					/*1994*/[0,27,36434],[1,27,40582],[2,27,60846],[3,27,70144],/*1995*/[0,28,37888],[1,28,38678],[2,28,62904],[3,28,68718],/*1996*/[0,29,38700],[1,29,41047],[2,29,63924],[3,29,71322],
            					/*1997*/[0,30,40411],[1,30,42956],[2,30,65459],[3,30,72996],/*1998*/[0,31,40350],[1,31,45091],[2,31,67548],[3,31,74230],/*1999*/[0,32,43497],[1,32,47916],[2,32,68817],[3,32,79419],
            					/*2000*/[0,33,44718],[1,33,49995],[2,33,68768],[3,33,84043],/*2001*/[0,34,43191],[1,34,49139],[2,34,67864],[3,34,78607],/*2002*/[0,35,42098],[1,35,47763],[2,35,67669],[3,35,75439], 
            					/*2003*/[0,36,41885],[1,36,46552],[2,36,67404],[3,36,77964],/*2004*/[0,37,41534],[1,37,47078],[2,37,67187],[3,37,78917],/*2005*/[0,38,41128],[1,38,47789],[2,38,67476],[3,38,81114], 
            					/*2006*/[0,39,41353],[1,39,48623],[2,39,67467],[3,39,82237],/*2007*/[0,40,42664],[1,40,48406],[2,40,68731],[3,40,82442],/*2008*/[0,41,41392],[1,41,45692],[2,41,66924],[3,41,79020], 
            					/*2009*/[0,42,39068],[1,42,46004],[2,42,65865],[3,42,78699],/*2010*/[0,43,38258],[1,43,44772],[2,43,64794],[3,43,75582],/*2011*/[0,44,37331],[1,44,44549],[2,44,63912],[3,44,74965],
            					/*2012*/[0,45,38084],[1,45,44055],[2,45,64391],[3,45,77010],/*2013*/[0,46,38704],[1,46,45592],[2,46,64854],[3,46,80661],/*2014*/[0,47,39021],[1,47,44171],[2,47,67146],[3,47,81897],
            					/*2015*/[0,48,40646],[1,48,46505],[2,48,65948],[3,48,83867],/*2016*/[0,49,43217],[1,49,49328],[2,49,68778],[3,49,87180],/*2017*/[0,50,42865],[1,50,51425],[2,50,70157],[3,50,85491], 
            					/*2018*/[0,51,42977],[1,51,52974],[2,51,72005],[3,51,89491],/*2019*/[0,52,46648],[1,52,53036],[2,52,72820],[3,52,98363],/*2020*/[0,53,48175],[1,53,58015],[3,53,78912],[3,53,99622],
           						 /*2021*/[0,54,48297],[1,54,57981],[2,54,77999],[3,54,101418]
				];
				const barOpt = {
				    tooltip: {
				    	formatter: function(params) {
				    		let series = params.seriesName;
				    		let val = params.value;
				    		return series + '<br/>Race: ' + 
				    			days[val[1]] + '<br/>Year: ' + 
				    			hours[val[0]] +'<br/>Income：$' + val[2];
				    	}
				    },
				    visualMap: {
				        max: 120000,
				        min: 1,
				        calculable: true,
				        inRange: {
				            color: ['#313695',
				            		'#4575b4',
        							'#74add1',
        							'#abd9e9',
        							'#e0f3f8',
        							'#ffffbf',
        							'#fee090',
        							'#fdae61',
        							'#f46d43',
        							'#d73027',
        							'#a50026']
				        },
				        textStyle: {
				            color: '#fff'
				        }
				    },
				    grid3D: {
				    	boxWidth: 450,
				    	boxDepth: 80,
				        viewControl: {
				        	distance: 220, //视觉距离
				            autoRotate: false //自动旋转
				        },
				        light: { //光照配置
				            main: {
				                intensity: 1.2,
				                shadow: true
				            },
				            ambient: {
				                intensity: 0.3
				            }
				        },
				        axisLabel: {
				        	textStyle: {
				        		color:  '#fff',
				        	}
				        },
				        axisLine: {
				        	lineStyle: {
				        		color: 	'#fff',
				        		width: 1
				        	}
				       	},
				       	axisPointer: {
				       		show: false
				       	}
				    },
				    xAxis3D: {
				        type: 'category',
				       	name: '',
				        data: hours
				    },
				    yAxis3D: {
				        type: 'category',
				        name: '',
				        data: days
				    },
				    zAxis3D: {
				        type: 'value',
						name: ''				        
				    },
				    series: [{
				        type: 'bar3D',
				        name: 'DoBois Data',
				        data: data.map(function (item) {
				            return {
				                value: [item[1], item[0], item[2]]
				            }
				        }),
				        shading: 'lambert',
				        emphasis: {
				            label: {
				                textStyle: {
				                    fontSize: 16,
				                    color: '#900'
				                }
				            },
				            itemStyle: {
				                color: '#900'
				            }
				        }
				    }]
				};
				//渲染图表
				bar3D.setOption(barOpt);
				
				
				/********** 浏览器窗口改变时，重置报表大小 ****************/
				window.onresize = function() {
					bar3D.resize();
					/*globe3D.resize();
					bar2D.resize();*/
				}
			});
		</script>
	</body>
</html>
